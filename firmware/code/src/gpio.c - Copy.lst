   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"gpio.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "/home/yan/Work/STM32KBD/firmware/code/src/gpio.c"
  20              		.section	.text.KBD_Init_Row,"ax",%progbits
  21              		.align	1
  22              		.global	KBD_Init_Row
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	KBD_Init_Row:
  28              	.LVL0:
  29              	.LFB133:
   1:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #include "gpio.h"
   2:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #include "mem_addresses.h"
   3:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
   4:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #include <stdio.h>
   5:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
   6:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #define GPIO_DEBUG 0
   7:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
   8:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if !defined(GPIO_DEBUG) || GPIO_DEBUG == 0
   9:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #define printf(...)
  10:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
  11:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  12:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #define __PORT_OF(pin) (pin / 16)
  13:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #define __PIN_OF(pin) (pin % 16)
  14:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  15:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** // Initialize the row pin
  16:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** void KBD_Init_Row(KBD_PIN_t pin) {
  30              		.loc 1 16 34 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 16 34 is_stmt 0 view .LVU1
  35 0000 00B5     		push	{lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 4
  38              		.cfi_offset 14, -4
  17:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("KBD_Init_Row: 0x%.2x\n", pin);
  39              		.loc 1 17 42 is_stmt 1 view .LVU2
  18:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  19:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if GPIO_DEBUG > 1
  20:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
  21:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
  22:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("before: MODER 0x%.8lx OTYPER 0x%.8lx OSPEEDR 0x%.8lx PUPDR 0x%.8lx IDR 0x%.8lx ODR 
  23:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->MODER,
  24:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->OTYPER,
  25:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->OSPEEDR,
  26:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->PUPDR,
  27:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->IDR,
  28:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->ODR,
  29:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->BSRR,
  30:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->LCKR,
  31:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->AFR[0],
  32:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->AFR[1]);
  33:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
  34:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
  35:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  36:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // Set the pin as output open drain
  37:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if USE_BIT_BANDING
  38:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // OSPEEDR
  39:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     uint32_t* temp = (uint32_t*)(__GPIO_BB_BASE_PORT(__PORT_OF(pin)) + 0x08 * 0x20 + __PIN_OF(pin) 
  40:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     #if GPIO_OSPEEDR == 0
  41:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp++ = 0;
  42:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp = 0;
  43:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     #elif GPIO_OSPEEDR == 1
  44:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp++ = 1;
  45:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp = 0;
  46:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     #elif GPIO_OSPEEDR == 2
  47:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp++ = 0;
  48:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp = 1;
  49:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     #elif GPIO_OSPEEDR == 3
  50:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp++ = 1;
  51:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp = 1;
  52:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     #endif    
  53:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("OSPEEDR 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x08));
  54:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  55:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // OTYPER 1 (open drain)
  56:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *(uint32_t*)(__GPIO_BB_BASE_PORT(__PORT_OF(pin)) + 0x04 * 0x20 + __PIN_OF(pin) * 4) = 1;
  57:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("OTYPER 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x04));
  58:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  59:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // PUPDR 00 (no pullup/pulldown)
  60:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp = (uint32_t*)(__GPIO_BB_BASE_PORT(__PORT_OF(pin)) + 0x0C * 0x20 + __PIN_OF(pin) * 8);
  61:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp++ = 0;
  62:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp = 0;
  63:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("PUPDR 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x0C));
  64:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  65:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // MODER: 01 (output)
  66:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp = (uint32_t*)(__GPIO_BB_BASE_PORT(__PORT_OF(pin)) + __PIN_OF(pin) * 8);
  67:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp++ = 1;
  68:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp = 0;
  69:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("MODER 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x00));
  70:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #else
  71:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     uint32_t temp;
  40              		.loc 1 71 5 view .LVU3
  72:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
  41              		.loc 1 72 5 view .LVU4
  42              		.loc 1 72 41 is_stmt 0 view .LVU5
  43 0002 0309     		lsrs	r3, r0, #4
  44 0004 9B02     		lsls	r3, r3, #10
  45 0006 03F18043 		add	r3, r3, #1073741824
  46 000a 03F50033 		add	r3, r3, #131072
  47              	.LVL1:
  73:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  74:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // OSPEEDR
  75:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp = port->OSPEEDR;
  48              		.loc 1 75 5 is_stmt 1 view .LVU6
  49              		.loc 1 75 10 is_stmt 0 view .LVU7
  50 000e 9968     		ldr	r1, [r3, #8]
  51              	.LVL2:
  76:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp &= ~(GPIO_OSPEEDR << (__PIN_OF(pin) * 2));
  52              		.loc 1 76 5 is_stmt 1 view .LVU8
  53              		.loc 1 76 32 is_stmt 0 view .LVU9
  54 0010 00F00F00 		and	r0, r0, #15
  55              	.LVL3:
  56              		.loc 1 76 46 view .LVU10
  57 0014 4FEA400E 		lsl	lr, r0, #1
  58              		.loc 1 76 28 view .LVU11
  59 0018 4FF0010C 		mov	ip, #1
  60 001c 0CFA0EF2 		lsl	r2, ip, lr
  61              		.loc 1 76 10 view .LVU12
  62 0020 21EA0201 		bic	r1, r1, r2
  63              	.LVL4:
  77:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp |= (GPIO_OSPEEDR << (__PIN_OF(pin) * 2));
  64              		.loc 1 77 5 is_stmt 1 view .LVU13
  65              		.loc 1 77 10 is_stmt 0 view .LVU14
  66 0024 1143     		orrs	r1, r1, r2
  67              	.LVL5:
  78:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     port->OSPEEDR = temp;
  68              		.loc 1 78 5 is_stmt 1 view .LVU15
  69              		.loc 1 78 19 is_stmt 0 view .LVU16
  70 0026 9960     		str	r1, [r3, #8]
  79:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("OSPEEDR 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x08));
  71              		.loc 1 79 87 is_stmt 1 view .LVU17
  80:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  81:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // OTYPER 1 (open drain)
  82:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     port->OTYPER |= (1 << __PIN_OF(pin));
  72              		.loc 1 82 5 view .LVU18
  73              		.loc 1 82 9 is_stmt 0 view .LVU19
  74 0028 5968     		ldr	r1, [r3, #4]
  75              	.LVL6:
  76              		.loc 1 82 24 view .LVU20
  77 002a 0CFA00FC 		lsl	ip, ip, r0
  78              		.loc 1 82 18 view .LVU21
  79 002e 41EA0C01 		orr	r1, r1, ip
  80 0032 5960     		str	r1, [r3, #4]
  81              	.LVL7:
  83:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("OTYPER 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x04));
  82              		.loc 1 83 86 is_stmt 1 view .LVU22
  84:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  85:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // PUPDR 00 (no pullup/pulldown)
  86:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     port->PUPDR &= ~(3 << (__PIN_OF(pin) * 2));
  83              		.loc 1 86 5 view .LVU23
  84              		.loc 1 86 9 is_stmt 0 view .LVU24
  85 0034 D968     		ldr	r1, [r3, #12]
  86              		.loc 1 86 24 view .LVU25
  87 0036 0320     		movs	r0, #3
  88 0038 00FA0EF0 		lsl	r0, r0, lr
  89              		.loc 1 86 17 view .LVU26
  90 003c 21EA0001 		bic	r1, r1, r0
  91 0040 D960     		str	r1, [r3, #12]
  87:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("PUPDR 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x0C));
  92              		.loc 1 87 85 is_stmt 1 view .LVU27
  88:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  89:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // MODER: 01 (output)
  90:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp = port->MODER;
  93              		.loc 1 90 5 view .LVU28
  94              		.loc 1 90 10 is_stmt 0 view .LVU29
  95 0042 1968     		ldr	r1, [r3]
  96              	.LVL8:
  91:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp &= ~(1 << (__PIN_OF(pin) * 2));
  97              		.loc 1 91 5 is_stmt 1 view .LVU30
  98              		.loc 1 91 10 is_stmt 0 view .LVU31
  99 0044 21EA0201 		bic	r1, r1, r2
 100              	.LVL9:
  92:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp |= (1 << (__PIN_OF(pin) * 2));
 101              		.loc 1 92 5 is_stmt 1 view .LVU32
 102              		.loc 1 92 10 is_stmt 0 view .LVU33
 103 0048 0A43     		orrs	r2, r2, r1
 104              	.LVL10:
  93:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     port->MODER = temp;
 105              		.loc 1 93 5 is_stmt 1 view .LVU34
 106              		.loc 1 93 17 is_stmt 0 view .LVU35
 107 004a 1A60     		str	r2, [r3]
  94:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("MODER 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x00));
 108              		.loc 1 94 85 is_stmt 1 view .LVU36
  95:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
  96:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
  97:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if GPIO_DEBUG > 1
  98:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
  99:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 100:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("after: MODER 0x%.8lx OTYPER 0x%.8lx OSPEEDR 0x%.8lx PUPDR 0x%.8lx IDR 0x%.8lx ODR 0
 101:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->MODER,
 102:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->OTYPER,
 103:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->OSPEEDR,
 104:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->PUPDR,
 105:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->IDR,
 106:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->ODR,
 107:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->BSRR,
 108:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->LCKR,
 109:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->AFR[0],
 110:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->AFR[1]);
 111:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
 112:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 113:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 114:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** }
 109              		.loc 1 114 1 is_stmt 0 view .LVU37
 110 004c 5DF804FB 		ldr	pc, [sp], #4
 111              		.cfi_endproc
 112              	.LFE133:
 114              		.section	.text.KBD_Init_Col,"ax",%progbits
 115              		.align	1
 116              		.global	KBD_Init_Col
 117              		.syntax unified
 118              		.thumb
 119              		.thumb_func
 121              	KBD_Init_Col:
 122              	.LVL11:
 123              	.LFB134:
 115:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 116:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** // Initialize the column pin
 117:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** void KBD_Init_Col(KBD_PIN_t pin) {
 124              		.loc 1 117 34 is_stmt 1 view -0
 125              		.cfi_startproc
 126              		@ args = 0, pretend = 0, frame = 0
 127              		@ frame_needed = 0, uses_anonymous_args = 0
 128              		@ link register save eliminated.
 118:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // Set the pin as input pullup
 119:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("KBD_Init_Col: 0x%.2x\n", pin);
 129              		.loc 1 119 42 view .LVU39
 120:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 121:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if GPIO_DEBUG > 1
 122:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
 123:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 124:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("before: MODER 0x%.8lx OTYPER 0x%.8lx OSPEEDR 0x%.8lx PUPDR 0x%.8lx\n",
 125:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->MODER,
 126:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->OTYPER,
 127:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->OSPEEDR,
 128:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->PUPDR);
 129:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
 130:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 131:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 132:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if USE_BIT_BANDING
 133:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // PUPDR 01 (pullup)
 134:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     uint32_t* temp = (uint32_t*)(__GPIO_BB_BASE_PORT(__PORT_OF(pin)) + 0x0C * 0x20 + __PIN_OF(pin) 
 135:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp-- = 0;
 136:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp = 1;
 137:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("PUPDR 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x0C));
 138:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 139:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // MODER: 00 (input)
 140:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp = (uint32_t*)(__GPIO_BB_BASE_PORT(__PORT_OF(pin)) + __PIN_OF(pin) * 8);
 141:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp++ = 0;
 142:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     *temp = 0;
 143:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("MODER 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x00));
 144:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #else
 145:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     uint32_t temp;
 130              		.loc 1 145 5 view .LVU40
 146:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 131              		.loc 1 146 5 view .LVU41
 132              		.loc 1 146 41 is_stmt 0 view .LVU42
 133 0000 0309     		lsrs	r3, r0, #4
 134 0002 9B02     		lsls	r3, r3, #10
 135 0004 03F18043 		add	r3, r3, #1073741824
 136 0008 03F50033 		add	r3, r3, #131072
 137              	.LVL12:
 147:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 148:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // PUPDR 01 (pullup)
 149:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp = port->PUPDR;
 138              		.loc 1 149 5 is_stmt 1 view .LVU43
 139              		.loc 1 149 10 is_stmt 0 view .LVU44
 140 000c DA68     		ldr	r2, [r3, #12]
 141              	.LVL13:
 150:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp &= ~(3 << (__PIN_OF(pin) * 2));
 142              		.loc 1 150 5 is_stmt 1 view .LVU45
 143              		.loc 1 150 21 is_stmt 0 view .LVU46
 144 000e 00F00F00 		and	r0, r0, #15
 145              	.LVL14:
 146              		.loc 1 150 35 view .LVU47
 147 0012 4000     		lsls	r0, r0, #1
 148              		.loc 1 150 17 view .LVU48
 149 0014 0321     		movs	r1, #3
 150 0016 8140     		lsls	r1, r1, r0
 151              		.loc 1 150 10 view .LVU49
 152 0018 22EA010C 		bic	ip, r2, r1
 153              	.LVL15:
 151:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp |= (1 << (__PIN_OF(pin) * 2));
 154              		.loc 1 151 5 is_stmt 1 view .LVU50
 155              		.loc 1 151 16 is_stmt 0 view .LVU51
 156 001c 0122     		movs	r2, #1
 157 001e 8240     		lsls	r2, r2, r0
 158              		.loc 1 151 10 view .LVU52
 159 0020 42EA0C02 		orr	r2, r2, ip
 160              	.LVL16:
 152:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     port->PUPDR = temp;
 161              		.loc 1 152 5 is_stmt 1 view .LVU53
 162              		.loc 1 152 17 is_stmt 0 view .LVU54
 163 0024 DA60     		str	r2, [r3, #12]
 153:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("PUPDR 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x0C));
 164              		.loc 1 153 85 is_stmt 1 view .LVU55
 154:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 155:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // MODER: 00 (input)
 156:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp = port->MODER;
 165              		.loc 1 156 5 view .LVU56
 166              		.loc 1 156 10 is_stmt 0 view .LVU57
 167 0026 1A68     		ldr	r2, [r3]
 168              	.LVL17:
 157:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     temp &= ~(3 << (__PIN_OF(pin) * 2));
 169              		.loc 1 157 5 is_stmt 1 view .LVU58
 170              		.loc 1 157 10 is_stmt 0 view .LVU59
 171 0028 22EA0102 		bic	r2, r2, r1
 172              	.LVL18:
 158:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     port->MODER = temp;
 173              		.loc 1 158 5 is_stmt 1 view .LVU60
 174              		.loc 1 158 17 is_stmt 0 view .LVU61
 175 002c 1A60     		str	r2, [r3]
 159:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("MODER 0x%.8lx\n", *(uint32_t*)(__GPIO_BASE_PORT(__PORT_OF(pin)) + 0x00));
 176              		.loc 1 159 85 is_stmt 1 view .LVU62
 160:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 161:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 162:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if GPIO_DEBUG > 1
 163:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
 164:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 165:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("after: MODER 0x%.8lx OTYPER 0x%.8lx OSPEEDR 0x%.8lx PUPDR 0x%.8lx\n",
 166:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->MODER,
 167:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->OTYPER,
 168:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->OSPEEDR,
 169:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****             port->PUPDR);
 170:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
 171:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 172:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 173:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** }
 177              		.loc 1 173 1 is_stmt 0 view .LVU63
 178 002e 7047     		bx	lr
 179              		.cfi_endproc
 180              	.LFE134:
 182              		.section	.text.KBD_Select_Row,"ax",%progbits
 183              		.align	1
 184              		.global	KBD_Select_Row
 185              		.syntax unified
 186              		.thumb
 187              		.thumb_func
 189              	KBD_Select_Row:
 190              	.LVL19:
 191              	.LFB135:
 174:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 175:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** void KBD_Select_Row(KBD_PIN_t pin) {
 192              		.loc 1 175 36 is_stmt 1 view -0
 193              		.cfi_startproc
 194              		@ args = 0, pretend = 0, frame = 0
 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196              		@ link register save eliminated.
 176:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // Set the pin to LOW
 177:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("KBD_Select_Row: 0x%.2x\n", pin);
 197              		.loc 1 177 44 view .LVU65
 178:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if GPIO_DEBUG > 1
 179:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
 180:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 181:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("before: IDR 0x%.8lx ODR 0x%.8lx\n", port->IDR, port->ODR);
 182:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
 183:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 184:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 185:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if USE_BIT_BANDING
 186:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
 187:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         uint32_t* rs = (uint32_t*)(__GPIO_BB_BASE_PORT(__PORT_OF(pin)) + 0x18 * 0x20 + 0x10 + __PIN
 188:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("RS PIN: 0x%.8lx\n", (uint32_t)rs);
 189:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         *rs = 1;
 190:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
 191:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #else
 192:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 198              		.loc 1 192 5 view .LVU66
 199              		.loc 1 192 41 is_stmt 0 view .LVU67
 200 0000 0309     		lsrs	r3, r0, #4
 201 0002 9B02     		lsls	r3, r3, #10
 202 0004 03F18043 		add	r3, r3, #1073741824
 203 0008 03F50033 		add	r3, r3, #131072
 204              	.LVL20:
 193:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     port->BSRR = (1 << (__PIN_OF(pin) + 16));
 205              		.loc 1 193 5 is_stmt 1 view .LVU68
 206              		.loc 1 193 25 is_stmt 0 view .LVU69
 207 000c 00F00F00 		and	r0, r0, #15
 208              	.LVL21:
 209              		.loc 1 193 39 view .LVU70
 210 0010 1030     		adds	r0, r0, #16
 211              		.loc 1 193 21 view .LVU71
 212 0012 0122     		movs	r2, #1
 213 0014 8240     		lsls	r2, r2, r0
 214              		.loc 1 193 16 view .LVU72
 215 0016 9A61     		str	r2, [r3, #24]
 194:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 195:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 196:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if GPIO_DEBUG > 1
 197:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
 198:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 199:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("after: IDR 0x%.8lx ODR 0x%.8lx\n", port->IDR, port->ODR);
 200:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
 201:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 202:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 203:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** }
 216              		.loc 1 203 1 view .LVU73
 217 0018 7047     		bx	lr
 218              		.cfi_endproc
 219              	.LFE135:
 221              		.section	.text.KBD_Unselect_Row,"ax",%progbits
 222              		.align	1
 223              		.global	KBD_Unselect_Row
 224              		.syntax unified
 225              		.thumb
 226              		.thumb_func
 228              	KBD_Unselect_Row:
 229              	.LVL22:
 230              	.LFB136:
 204:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 205:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** void KBD_Unselect_Row(KBD_PIN_t pin) {
 231              		.loc 1 205 38 is_stmt 1 view -0
 232              		.cfi_startproc
 233              		@ args = 0, pretend = 0, frame = 0
 234              		@ frame_needed = 0, uses_anonymous_args = 0
 235              		@ link register save eliminated.
 206:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     // Set the pin to HIGH (open drain)
 207:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     printf("KBD_Unselect_Row: 0x%.2x\n", pin);
 236              		.loc 1 207 46 view .LVU75
 208:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if GPIO_DEBUG > 1
 209:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
 210:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 211:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("before: IDR 0x%.8lx ODR 0x%.8lx\n", port->IDR, port->ODR);
 212:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
 213:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 214:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 215:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if USE_BIT_BANDING
 216:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
 217:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         uint32_t* bs = (uint32_t*)(__GPIO_BB_BASE_PORT(__PORT_OF(pin)) + 0x18 * 0x20 + __PIN_OF(pin
 218:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("BS PIN: 0x%.8lx\n", (uint32_t)bs);
 219:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         *bs = 0;
 220:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
 221:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #else
 222:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 237              		.loc 1 222 5 view .LVU76
 238              		.loc 1 222 41 is_stmt 0 view .LVU77
 239 0000 0309     		lsrs	r3, r0, #4
 240 0002 9B02     		lsls	r3, r3, #10
 241 0004 03F18043 		add	r3, r3, #1073741824
 242 0008 03F50033 		add	r3, r3, #131072
 243              	.LVL23:
 223:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     port->BSRR = (1 << (__PIN_OF(pin)));
 244              		.loc 1 223 5 is_stmt 1 view .LVU78
 245              		.loc 1 223 25 is_stmt 0 view .LVU79
 246 000c 00F00F00 		and	r0, r0, #15
 247              	.LVL24:
 248              		.loc 1 223 21 view .LVU80
 249 0010 0122     		movs	r2, #1
 250 0012 8240     		lsls	r2, r2, r0
 251              		.loc 1 223 16 view .LVU81
 252 0014 9A61     		str	r2, [r3, #24]
 224:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 225:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 226:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #if GPIO_DEBUG > 1
 227:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     {
 228:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         GPIO_TypeDef* port = (GPIO_TypeDef*)__GPIO_BASE_PORT(__PORT_OF(pin));
 229:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****         printf("after: IDR 0x%.8lx ODR 0x%.8lx\n", port->IDR, port->ODR);
 230:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     }
 231:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** #endif
 232:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 233:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** }
 253              		.loc 1 233 1 view .LVU82
 254 0016 7047     		bx	lr
 255              		.cfi_endproc
 256              	.LFE136:
 258              		.section	.text.Read_Col,"ax",%progbits
 259              		.align	1
 260              		.global	Read_Col
 261              		.syntax unified
 262              		.thumb
 263              		.thumb_func
 265              	Read_Col:
 266              	.LVL25:
 267              	.LFB137:
 234:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 235:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** // Read the state of the column pin
 236:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** int Read_Col(KBD_PIN_t pin) {
 268              		.loc 1 236 29 is_stmt 1 view -0
 269              		.cfi_startproc
 270              		@ args = 0, pretend = 0, frame = 0
 271              		@ frame_needed = 0, uses_anonymous_args = 0
 272              		@ link register save eliminated.
 237:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     return 0;
 273              		.loc 1 237 5 view .LVU84
 238:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** }
 274              		.loc 1 238 1 is_stmt 0 view .LVU85
 275 0000 0020     		movs	r0, #0
 276              	.LVL26:
 277              		.loc 1 238 1 view .LVU86
 278 0002 7047     		bx	lr
 279              		.cfi_endproc
 280              	.LFE137:
 282              		.section	.text.Read_Port,"ax",%progbits
 283              		.align	1
 284              		.global	Read_Port
 285              		.syntax unified
 286              		.thumb
 287              		.thumb_func
 289              	Read_Port:
 290              	.LVL27:
 291              	.LFB138:
 239:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** 
 240:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** // Read the state of all pins in the port
 241:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** uint32_t Read_Port(KBD_PORT_t port) {
 292              		.loc 1 241 37 is_stmt 1 view -0
 293              		.cfi_startproc
 294              		@ args = 0, pretend = 0, frame = 0
 295              		@ frame_needed = 0, uses_anonymous_args = 0
 296              		@ link register save eliminated.
 242:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c ****     return 0;
 297              		.loc 1 242 5 view .LVU88
 243:/home/yan/Work/STM32KBD/firmware/code/src/gpio.c **** }
 298              		.loc 1 243 1 is_stmt 0 view .LVU89
 299 0000 0020     		movs	r0, #0
 300              	.LVL28:
 301              		.loc 1 243 1 view .LVU90
 302 0002 7047     		bx	lr
 303              		.cfi_endproc
 304              	.LFE138:
 306              		.text
 307              	.Letext0:
 308              		.file 2 "/home/yan/Work/STM32KBD/firmware/stm32cube_mcu_package/STM32CubeF4/Drivers/CMSIS/Device/S
 309              		.file 3 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stdint.h"
 310              		.file 4 "/home/yan/Work/STM32KBD/firmware/code/include/gpio.h"
DEFINED SYMBOLS
                            *ABS*:00000000 gpio.c
     /tmp/cc6RSH9h.s:21     .text.KBD_Init_Row:00000000 $t
     /tmp/cc6RSH9h.s:27     .text.KBD_Init_Row:00000000 KBD_Init_Row
     /tmp/cc6RSH9h.s:115    .text.KBD_Init_Col:00000000 $t
     /tmp/cc6RSH9h.s:121    .text.KBD_Init_Col:00000000 KBD_Init_Col
     /tmp/cc6RSH9h.s:183    .text.KBD_Select_Row:00000000 $t
     /tmp/cc6RSH9h.s:189    .text.KBD_Select_Row:00000000 KBD_Select_Row
     /tmp/cc6RSH9h.s:222    .text.KBD_Unselect_Row:00000000 $t
     /tmp/cc6RSH9h.s:228    .text.KBD_Unselect_Row:00000000 KBD_Unselect_Row
     /tmp/cc6RSH9h.s:259    .text.Read_Col:00000000 $t
     /tmp/cc6RSH9h.s:265    .text.Read_Col:00000000 Read_Col
     /tmp/cc6RSH9h.s:283    .text.Read_Port:00000000 $t
     /tmp/cc6RSH9h.s:289    .text.Read_Port:00000000 Read_Port

NO UNDEFINED SYMBOLS
